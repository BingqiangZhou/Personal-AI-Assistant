# =============================================================================
# Docker 云端生产环境配置 / Cloud Production Environment Configuration
# =============================================================================
# 使用方法 / Usage:
#   cd docker
#   docker compose --env-file .env.example up -d
#
# 切换到本地开发 / Switch to local development:
#   docker compose --env-file .env.dev up -d

# =============================================================================
# ============ 项目配置 / Project Configuration ============
# =============================================================================
PROJECT_NAME=personal_ai

# =============================================================================
# ============ Docker Compose Profiles / Profile Configuration ============
# =============================================================================
# 控制是否启动 Nginx / Control whether to start Nginx
# prod: 云端部署启动 Nginx / Cloud: start Nginx
# 留空: 本地开发不启动 Nginx / Local: don't start Nginx
COMPOSE_PROFILES=prod

# =============================================================================
# ============ 端口配置 / Port Configuration ============
# =============================================================================
# Nginx 端口（标准生产端口）/ Nginx ports (standard production ports)
HTTP_PORT=80
HTTPS_PORT=443

# 后端端口（不对外暴露）/ Backend port (not exposed)
BACKEND_PUBLISH_PORT=8000

# 数据库和 Redis 端口（生产环境不暴露）/ Database and Redis ports (not exposed)
DB_PORT=
REDIS_PORT=

# =============================================================================
# ============ 数据库配置 / Database Configuration ============
# =============================================================================
POSTGRES_DB=personal_ai
POSTGRES_USER=admin
# ⚠️ 必须修改为安全密码 / MUST CHANGE to secure password
POSTGRES_PASSWORD=MySecurePass2024!

# =============================================================================
# ============ Redis 配置 / Redis Configuration ============
# =============================================================================
# 建议设置 Redis 密码 / Recommended to set Redis password
REDIS_PASSWORD=

# =============================================================================
# ============ 后端配置 / Backend Configuration ============
# =============================================================================
BACKEND_SRC_DIR=../backend
BACKEND_ENV_FILE=../backend/.env
# 云端使用 uvicorn 多 worker 提高性能
# Cloud: uvicorn with multiple workers for better performance
BACKEND_CMD=uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4 --log-level info

# =============================================================================
# ============ Nginx 配置 / Nginx Configuration ============
# =============================================================================
NGINX_CONF_DIR=./nginx
NGINX_CERT_DIR=./nginx/cert
NGINX_LOG_DIR=./nginx/logs

# HTTPS 模式配置 / HTTPS Mode Configuration
# - http: 仅 HTTP / HTTP only
# - https: 启用 HTTPS (需要自备证书) / Enable HTTPS (requires your own certificates)
HTTPS_MODE=http

# 域名配置（用于 HTTPS）/ Domain configuration (for HTTPS)
DOMAIN=example.com
SSL_CERT_PATH=/etc/nginx/cert/fullchain.pem
SSL_KEY_PATH=/etc/nginx/cert/privkey.pem

# 调试模式（生产环境设为 false）/ Debug mode (set to false in production)
DEBUG_CONFIG=false

# =============================================================================
# ============ 存储路径配置 / Storage Path Configuration ============
# =============================================================================
LOG_DIR=./logs
TRANSCRIPTION_TEMP_DIR=./temp/transcription
TRANSCRIPTION_STORAGE_DIR=./storage/podcasts

# =============================================================================
# ============ Celery 配置 / Celery Configuration ============
# =============================================================================
CELERY_WORKERS=2
CELERY_LOG_LEVEL=info
