# =============================================================================
# Docker 环境配置模板 / Docker Environment Configuration Template
# =============================================================================
# 此文件用于 Docker Compose 部署
# This file is used for Docker Compose deployment
#
# 使用方法 / Usage:
#   1. 复制此文件为 .env
#   2. 修改配置值（特别是标记为"必须修改"的部分）
#   3. cd docker && docker-compose up -d
#
# 生成安全密钥 / Generate secure keys:
#   openssl rand -hex 32

# =============================================================================
# ============ 项目配置 / Project Configuration ============
# =============================================================================
PROJECT_NAME=personal_ai
VERSION=1.0.0
API_V1_STR=/api/v1
ENVIRONMENT=production

# =============================================================================
# ============ 数据库配置 / Database Configuration ============
# =============================================================================
POSTGRES_DB=personal_ai
POSTGRES_USER=admin
# ⚠️ 必须修改 / MUST CHANGE
POSTGRES_PASSWORD=MySecurePass2024!

# Docker 内部连接字符串 / Internal connection for Docker
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# =============================================================================
# ============ Redis 配置 / Redis Configuration ============
# =============================================================================
# Redis 密码 (留空表示无密码 / Leave empty for no password)
REDIS_PASSWORD=

# Docker 内部连接 / Internal connection for Docker
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/0

# =============================================================================
# ============ JWT 配置 / JWT Configuration ============
# =============================================================================
# ⚠️ 必须修改为随机字符串 / MUST CHANGE to random string
# 生成命令: openssl rand -hex 32
JWT_SECRET_KEY=6e7050230abee6225cc1213ea2b507e2c34e1dfde213feab5e3a5db0b15b8db8
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# =============================================================================
# ============ CORS 配置 / CORS Configuration ============
# =============================================================================
# 允许的跨域来源 / Allowed CORS origins
ALLOWED_HOSTS=["*"]

# =============================================================================
# ============ Docker 和 Nginx 配置 / Docker & Nginx Configuration ============
# =============================================================================
# 域名配置 (用于 Nginx 和 CORS) / Domain for Nginx and CORS
DOMAIN=your-domain.com

# SSL 证书路径 (容器内路径，证书需放在 docker/nginx/cert/ 目录)
# SSL certificate paths (internal container paths, certificates in docker/nginx/cert/)
SSL_CERT_PATH=/etc/nginx/cert/fullchain.pem
SSL_KEY_PATH=/etc/nginx/cert/privkey.pem

# Nginx 配置路径（宿主机路径）/ Nginx configuration paths (host paths)
NGINX_CONF_DIR=./nginx
NGINX_CERT_DIR=./nginx/cert
NGINX_LOG_DIR=./nginx/logs

# Docker 后端配置 / Docker backend configuration
BACKEND_WORKERS=4
CELERY_WORKERS=2

# =============================================================================
# ============ 日志配置 / Logging Configuration ============
# =============================================================================
LOG_LEVEL=INFO              # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_RETENTION_DAYS=30       # Number of days to keep old logs
TZ=Asia/Shanghai            # Timezone

# =============================================================================
# ============ 本地路径配置 / Local Host Paths Configuration ============
# =============================================================================
# 这些是宿主机上的路径，会映射到容器内部
# These are local host paths that will be mounted into the container
#
# 转录临时文件目录（宿主机路径）/ Transcription temp directory (host path)
TRANSCRIPTION_TEMP_DIR=./temp/transcription
#
# 转录存储目录（宿主机路径）/ Transcription storage directory (host path)
TRANSCRIPTION_STORAGE_DIR=./storage/podcasts
#
# 日志目录（宿主机路径）/ Logs directory (host path)
LOG_DIR=./logs

# =============================================================================
# ============ 外部 API 配置 / External API Configuration ============
# =============================================================================
# OpenAI API
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_BASE_URL=https://api.openai.com/v1

# SiliconFlow 转录 API (如果使用) / SiliconFlow Transcription API (optional)
TRANSCRIPTION_API_URL=https://api.siliconflow.cn/v1/audio/transcriptions
TRANSCRIPTION_API_KEY=your_siliconflow_api_key_here

# =============================================================================
# ============ 文件存储配置 / File Storage Configuration ============
# =============================================================================
MAX_FILE_SIZE=104857600  # 100MB in bytes
UPLOAD_DIR=uploads
DATA_DIR=data

# =============================================================================
# ============ 播客功能配置 / Podcast Features Configuration ============
# =============================================================================
LLM_CONTENT_SANITIZE_MODE=standard
PODCAST_SUBSCRIPTION_LIMIT=20

# =============================================================================
# ============ 转录功能配置 / Transcription Feature Configuration ============
# =============================================================================
# 文件处理 / File processing
TRANSCRIPTION_CHUNK_SIZE_MB=10
TRANSCRIPTION_TARGET_FORMAT=mp3
TRANSCRIPTION_TEMP_DIR=./temp/transcription
TRANSCRIPTION_STORAGE_DIR=./storage/podcasts

# 并发配置 / Concurrency
TRANSCRIPTION_MAX_THREADS=4

# 模型配置 / Model configuration
TRANSCRIPTION_MODEL=FunAudioLLM/SenseVoiceSmall
SUPPORTED_TRANSCRIPTION_MODELS=FunAudioLLM/SenseVoiceSmall,whisper-1,whisper-large-v3

# AI 摘要配置 / AI summary configuration
SUMMARY_MODEL=gpt-4o-mini
SUPPORTED_SUMMARY_MODELS=gpt-4o-mini,gpt-4o,gpt-3.5-turbo
