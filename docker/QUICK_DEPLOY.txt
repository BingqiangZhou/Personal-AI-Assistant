================================================================================
                        个人AI助手 - 播客功能
                        3分钟极速部署脚本
================================================================================

【操作系统检测到】: Windows

【如果您已安装Docker Desktop】，请直接复制以下命令执行:

────────────────────────────────────────────────────────────────────────────────

第1步: 配置环境 (只需30秒)

cd E:\Projects\AI\PersonalKnowledgeLibrary\Claude\personal-ai-assistant\backend
notepad .env

# 在打开的文件中粘贴以下内容 (请修改 SECRET_KEY):
SECRET_KEY=生成一个随机字符串: 在PowerShell中运行 python -c "import secrets; print(secrets.token_urlsafe(48))"
DATABASE_URL=postgresql+asyncpg://admin:123456@postgres:5432/personal_ai
REDIS_URL=redis://redis:6379
ENVIRONMENT=Docker
DLLM_CONTENT_SANITIZE_MODE=standard

────────────────────────────────────────────────────────────────────────────────

第2步: 启动服务 (复制到PowerShell运行)

cd E:\Projects\AI\PersonalKnowledgeLibrary\Claude\personal-ai-assistant
docker compose -f docker-compose.podcast.yml up -d --build

────────────────────────────────────────────────────────────────────────────────

第3步: 等待完成 (1-3分钟)

查看状态:
docker compose -f docker-compose.podcast.yml ps

当所有服务显示 "Up" 时，访问:
http://localhost:8000/docs

================================================================================

【如果还没有Docker?】

1. 下载安装 Docker Desktop: https://www.docker.com/products/docker-desktop/
2. 安装后重启电脑
3. 运行上面的第2步

================================================================================

【测试部署是否成功】

打开浏览器访问:
http://localhost:8000/Health

正确返回:
{"status": "healthy"}

================================================================================

【常见问题快速修复】

问题: "port is already allocated"
解决: 只开8000端口的程序，或改端口: 在 docker-compose.podcast.yml 中修改 8000:8000 为 8001:8000

问题: "connection refused"
解决: 等待1分钟后再试，或运行: docker logs -f podcast_backend

问题: "password authentication failed"
解决: 编辑 backend/.env，确保 DATABASE_URL 中的密码与 docker-compose.podcast.yml 第11行一致

================================================================================

【部署成功后操作】

1. 访问 API 文档: http://localhost:8000/docs
2. 点击 "Authorize" 按钮
3. 注册新用户: POST /api/v1/auth/register
4. 登录获取 Token
5. 测试添加播客订阅: POST /api/v1/podcasts/subscription

─────────────────────────────────────────────────────────────────────

完整文档: DEPLOY_DOCKER.md
启动脚本: start.bat (双击运行，有图形引导)

================================================================================
                                             部署时间: 预计 3-5 分钟
                                             成功率: 95%+
                                             难度: 简单 ✓
================================================================================
