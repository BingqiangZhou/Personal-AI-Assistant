# =============================================================================
# 后端应用配置模板 / Backend Application Configuration Template
# =============================================================================
# 此文件包含后端 FastAPI 应用的所有配置
# This file contains all configurations for the backend FastAPI application
#
# 使用方法 / Usage:
#   1. 复制此文件为 .env
#   2. 修改配置值（特别是标记为"必须修改"的部分）
#   3. cd backend && uv run uvicorn app.main:app --reload
#
# 注意: Docker 部署时的容器配置请使用 docker/.env 文件
# Note: For Docker deployment container config, use docker/.env

# =============================================================================
# ============ 应用配置 / Application Configuration ============
# =============================================================================
ENVIRONMENT=production
VERSION=1.0.0
API_V1_STR=/api/v1

# =============================================================================
# ============ 数据库连接配置 / Database Connection Configuration ============
# =============================================================================
# Docker 部署时使用内部连接 / Use internal connection for Docker deployment
# DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}
# 本地开发使用 localhost连接 / Use localhost for local development
DATABASE_URL=postgresql+asyncpg://admin:MySecurePass2024!@localhost:5432/personal_ai

DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# =============================================================================
# ============ Redis 连接配置 / Redis Connection Configuration ============
# =============================================================================
# Docker 部署时使用内部连接 / Use internal connection for Docker deployment
# REDIS_URL=redis://:@redis:6379
# 本地开发使用 localhost连接 / Use localhost for local development
REDIS_URL=redis://:@localhost:6379

# Celery 配置 / Celery configuration
CELERY_BROKER_URL=redis://:@localhost:6379/0
CELERY_RESULT_BACKEND=redis://:@localhost:6379/0

# =============================================================================
# ============ 日志配置 / Logging Configuration ============
# =============================================================================
LOG_LEVEL=INFO              # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_RETENTION_DAYS=30       # Number of days to keep old logs
TZ=Asia/Shanghai            # Timezone for log timestamps

# =============================================================================
# ============ JWT 配置 / JWT Configuration ============
# =============================================================================
# ⚠️ 必须修改为随机字符串 / MUST CHANGE to random string
# 生成命令: openssl rand -hex 32
JWT_SECRET_KEY=f7c0e89083e3d7552f16179cd9edecb9daac84340c2b92313c854662d5269fac
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# =============================================================================
# ============ CORS 配置 / CORS Configuration ============
# =============================================================================
# 允许的跨域来源 / Allowed CORS origins
ALLOWED_HOSTS=["*"]

# =============================================================================
# ============ 外部 API 配置 / External API Configuration ============
# =============================================================================
# OpenAI API
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_BASE_URL=https://api.openai.com/v1

# SiliconFlow 转录 API (可选) / SiliconFlow Transcription API (optional)
TRANSCRIPTION_API_URL=https://api.siliconflow.cn/v1/audio/transcriptions
TRANSCRIPTION_API_KEY=your_siliconflow_api_key_here

# =============================================================================
# ============ 文件存储配置 / File Storage Configuration ============
# =============================================================================
MAX_FILE_SIZE=104857600  # 100MB in bytes
UPLOAD_DIR=uploads
DATA_DIR=data

# =============================================================================
# ============ 播客功能配置 / Podcast Features Configuration ============
# =============================================================================
LLM_CONTENT_SANITIZE_MODE=standard
PODCAST_SUBSCRIPTION_LIMIT=20

# =============================================================================
# ============ 转录功能配置 / Transcription Feature Configuration ============
# =============================================================================
# 文件处理 / File processing
TRANSCRIPTION_CHUNK_SIZE_MB=10
TRANSCRIPTION_TARGET_FORMAT=mp3

# 并发配置 / Concurrency
TRANSCRIPTION_MAX_THREADS=4

# 模型配置 / Model configuration
TRANSCRIPTION_MODEL=FunAudioLLM/SenseVoiceSmall
SUPPORTED_TRANSCRIPTION_MODELS=FunAudioLLM/SenseVoiceSmall,whisper-1,whisper-large-v3

# AI 摘要配置 / AI summary configuration
SUMMARY_MODEL=gpt-4o-mini
SUPPORTED_SUMMARY_MODELS=gpt-4o-mini,gpt-4o,gpt-3.5-turbo
